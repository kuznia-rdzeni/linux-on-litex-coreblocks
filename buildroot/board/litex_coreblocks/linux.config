CONFIG_SECTION_MISMATCH_WARN_ONLY=y

# Architecture
CONFIG_ARCH_DEFCONFIG="arch/riscv/configs/defconfig"
CONFIG_ARCH_RV32I=y
CONFIG_RISCV_ISA_M=y
CONFIG_RISCV_ISA_A=y
CONFIG_RISCV_ISA_C=n
CONFIG_SIFIVE_PLIC=n
CONFIG_FPU=n
CONFIG_SMP=n
CONFIG_MMU=n
CONFIG_BROKEN_ON_SMP=y
CONFIG_EFI=n 
CONFIG_STRICT_KERNEL_RWX=n
CONFIG_NONPORTABLE=y
CONFIG_HZ_100=y


# Kernel
CONFIG_MODULES=n

# Memory
CONFIG_PHYS_RAM_BASE_FIXED=y
CONFIG_PHYS_RAM_BASE=0x80000000
CONFIG_PAGE_OFFSET=0x80000000
CONFIG_ARCH_FLATMEM_ENABLE=y


# Device tree

# External - loaded by BIOS and address passed in a1
#CONFIG_BUILTIN_DTB=n
# Builtin - compiled via buildroot
CONFIG_BUILTIN_DTB=y
CONFIG_BUILTIN_DTB_SOURCE="rv32_litex_coreblocks"

# default cmdline if not supplied in dtb / pre dtb
CONFIG_CMDLINE="earlycon=liteuart,0xe8007000"

# Init

CONFIG_BLK_DEV_INITRD=y
CONFIG_BLK_DEV_RAM=y # for initrd
CONFIG_INITRAMFS_SOURCE="" # use intird from dts
CONFIG_RD_GZIP=y

# Binaries

CONFIG_BINFMT_FLAT=y # buildroot produces flat bins for no-mmu
CONFIG_BINFMT_ELF_FDPIC=y # nommu elf variant

# FPGA / SoC
#CONFIG_FPGA=y
#CONFIG_FPGA_MGR_LITEX=y

CONFIG_COMMON_CLK=y
CONFIG_COMMON_CLK_LITEX=y

CONFIG_LITEX_SOC_CONTROLLER=y
CONFIG_LITEX_SUBREG_SIZE=4


CONFIG_PRINTK_TIME=y

# IRQ
CONFIG_IRQCHIP=y
CONFIG_OF_IRQ=y
#CONFIG_HANDLE_DOMAIN_IRQ=y
#CONFIG_IRQ_DOMAIN=y
CONFIG_CLINT_TIMER=y

# Serial
#CONFIG_SERIAL_EARLYCON_RISCV_SBI=y
CONFIG_SERIAL_LITEUART=y
CONFIG_SERIAL_LITEUART_MAX_PORTS=2
CONFIG_SERIAL_LITEUART_CONSOLE=y


# FS
CONFIG_VFAT_FS=y
CONFIG_TMPFS=y
CONFIG_EXT4_FS=y
CONFIG_FAT_FS=y
CONFIG_MSDOS_FS=y
CONFIG_MSDOS_PARTITION=y

# Ethernet
#CONFIG_NET=y
#CONFIG_PACKET=y
#CONFIG_PACKET_DIAG=y
#CONFIG_INET=y
#CONFIG_NETDEVICES=y
#CONFIG_NET_VENDOR_LITEX=y
#CONFIG_LITEX_LITEETH=y

# GPIO
#CONFIG_GPIO_SYSFS=y
#CONFIG_GPIOLIB=y
#CONFIG_GPIO_LITEX=y

# PWM
#CONFIG_PWM=y
#CONFIG_PWM_LITEX=y

# SPI
#CONFIG_SPI=y
#CONFIG_SPI_LITESPI=y
#CONFIG_SPI_SPIDEV=y

# I2C
#CONFIG_I2C=y
#CONFIG_I2C_LITEX=y
#CONFIG_I2C_CHARDEV=y

# Hardware monitoring
#CONFIG_HWMON=y
#CONFIG_SENSORS_LITEX_HWMON=y

# Framebuffer
#CONFIG_FB=y
#CONFIG_FB_SIMPLE=y
#CONFIG_FRAMEBUFFER_CONSOLE=y
#CONFIG_FRAMEBUFFER_CONSOLE_DETECT_PRIMARY=y
#CONFIG_LOGO=y
#CONFIG_DRM=y
#CONFIG_DRM_LITEVIDEO=y

# Flash
#CONFIG_MTD=y
#CONFIG_MTD_SPI_NOR=y
#CONFIG_SPI_FLASH_LITEX=y

# MMC
#CONFIG_MMC=y
#CONFIG_MMC_SPI=y
#CONFIG_MMC_LITEX=y

CONFIG_IKCONFIG=y
CONFIG_IKCONFIG_PROC=y
